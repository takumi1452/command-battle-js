# 要件定義書：command-battle-js

## 目次
- [要件定義書：command-battle-js](#要件定義書command-battle-js)
  - [目次](#目次)
  - [0. 改訂履歴](#0-改訂履歴)
  - [1. 概要](#1-概要)
    - [1.1 背景](#11-背景)
    - [1.2 目的（ゴール）](#12-目的ゴール)
    - [1.3 対象ユーザー / 利用シーン](#13-対象ユーザー--利用シーン)
    - [1.4 スコープ](#14-スコープ)
  - [2. 用語・前提](#2-用語前提)
  - [3. システム構成](#3-システム構成)
    - [3.1 使用技術](#31-使用技術)
    - [3.2 動作環境](#32-動作環境)
    - [3.3 データ保存・連携](#33-データ保存連携)
  - [4. 画面・UI要件](#4-画面ui要件)
    - [4.1 画面一覧](#41-画面一覧)
    - [4.2 画面詳細](#42-画面詳細)
  - [5. 機能要件](#5-機能要件)
    - [5.1 機能一覧（MUST / SHOULD / COULD）](#51-機能一覧must--should--could)
    - [5.2 機能詳細](#52-機能詳細)
      - [5.2.1 機能名](#521-機能名)
    - [5.3 データ要件](#53-データ要件)
      - [5.3.1 データ構造](#531-データ構造)
      - [5.3.2 保存仕様](#532-保存仕様)
      - [5.3.3 識別方法](#533-識別方法)
  - [6. 非機能要件](#6-非機能要件)
  - [7. 制約・リスク](#7-制約リスク)
  - [8. 受け入れ基準（完了条件）](#8-受け入れ基準完了条件)
  - [9. 今後の拡張（バックログ）](#9-今後の拡張バックログ)
  - [10. 参考資料](#10-参考資料)


## 0. 改訂履歴
| 日付 | 版 | 変更概要 | 変更者 |
|---|---|---|---|
| 2026-02-12 | 0.1 | 初版 | 久瀬匠 |

---

## 1. 概要
### 1.1 背景
- 今まで、1行ログアプリとシンプルなToDoアプリを作成した。そこで学んだことを活かした簡単なゲームを作成したいと考えた。
- 設計→開発→テストの一連の流れを経験するため。
- 技術的に何が身についていないかを明確にするため。

### 1.2 目的（ゴール）
- PCのGoogle Chrome上で動作する、シンプルなコマンドバトルゲームを作成する。
- JavaScriptによるDOM操作、イベント処理、情報管理を身に着ける。
- CSSによる基本的なレイアウト・UI調整を理解する。
- 画面遷移を経験する。

### 1.3 対象ユーザー / 利用シーン
- 対象ユーザー
  - 自分
- 利用シーン
  - 暇でPCで簡単なゲームを遊びたい際に。

### 1.4 スコープ
- 今回作る範囲（MVP）
  - ゲーム開始画面
    - ゲームタイトルの表示
    - ゲームプレイ画面への移行
  - ゲームプレイ画面
    - ターン制
    - 行動に対するメッセージ（例：プレイヤーの攻撃…など）
    - 敵側の表示と管理
      - HP
      - HPや攻撃力に関しての多少の乱数調整
    - プレイヤー側の表示と管理
      - HP
      - MP
      - 戦闘コマンド（武術系と魔法系）
    - 勝敗の判定 
    - ゲーム終了画面への移行
  - ゲーム終了画面
    - 結果の表示
    - リスタートの表示とそれによるゲーム開始画面への移行
- 今回はやらない範囲（明確に）
  - ユーザー管理
  - ログイン機能
  - スマートフォン対応
  - サーバーやデータベースの使用
  - 高度なデザイン調整
  - 戦闘記録の保存
  - ブラウザ再読み込み後も状態を保存
  - 敵側の行動にAIや複雑な状態変化の導入
  - アイテムや道具等の効果による能力の変化
  - 戦闘から逃げるコマンドの追加
  - クリティカルや回避などによるダメージ等の変化
  - 3D
  - 音楽
  - 物語
  - 一人のプレイヤー、一人の敵以外の登場人物

---

## 2. 用語・前提
- 用語定義
  - ターン：プレイヤーの行動 → 敵行動までを1ターンとする
  - HP：体力。0以下で敗北。
  - MP：魔法使用に必要なポイント
- 前提条件
  - ネット接続不要
  - ログイン不要

---

## 3. システム構成
### 3.1 使用技術
- HTML / CSS / JavaScript
- 開発環境：VSCode
- バージョン管理：Git/GitHub

本アプリは単一のHTMLファイルで構成する。
- 画面遷移はページ遷移ではなく、同一ページ内で表示要素を切り替えて実現する。
- ゲーム開始画面 / ゲームプレイ画面 / ゲーム終了画面の各画面は、表示/非表示で切り替える。

### 3.2 動作環境
- 対応端末：PC
- 対応OS：Windows
- 対応ブラウザ：Google Chrome

### 3.3 データ保存・連携
- 保存先：使用しない
- 保存内容：なし
- 保存タイミング：なし
- 外部APIの有無：なし

---

## 4. 画面・UI要件
### 4.1 画面一覧
| 画面ID | 画面名 | 概要 |
|---|---|---|
| S01 | ゲーム開始画面 | ゲームタイトルとゲーム開始ボタンを表示 |
| B01 | ゲームプレイ画面  | コマンド選択式のバトルを行う |
| R01 | ゲーム終了画面 | 勝敗結果と再スタートボタンの表示 |

### 4.2 画面詳細
- S01
  - ゲームタイトルの表示
  - ゲーム開始ボタンの表示
- B01
  - 最上部左上：現在のターン（何ターン目か）の表示
  - 上半分：敵に関する表示
    - 絵：ピクセル絵のようなものを想定
    - 名前：ゴブリン
    - HP：45 / 50 のように表示
  - 下半分：プレイヤーに関する表示
    - 絵：ピクセル絵のようなものを想定
    - 名前：プレイヤー
    - HP：45 / 50 のように表示
    - MP：8 / 10 のように表示
    - 戦闘コマンド
      - 戦う
        - 剣
        - 魔法
          - ファイヤーボール
  - 最下部：行動に関するテキスト
    - 誰のターンか
    - 誰がどのような攻撃をしたのか
    - 与えられたダメージ量
- R01
  - 勝敗結果の表示
  - 再スタートボタンの表示

---

## 5. 機能要件
### 5.1 機能一覧（MUST / SHOULD / COULD）
- MUST
  - S01/B01/R01の表示切替
  - プレイヤーのコマンド入力
  - MP管理（消費・不足時の処理）
  - 敵の攻撃の自動処理
  - HP/MP表示の更新
  - 勝敗判定（HP <= 0）
  - リスタートで初期化
  - 戦闘の状態を知らせるテキスト機能
- SHOULD
  - 戦闘内容がログとして残る（そのゲーム中のみ）
  - 操作受付中だけボタン有効（多重クリック防止）
  - 敵の初期HP/攻撃力にバラツキ（開始時だけ）
  - 表示の整形（HPバー、強調表示など軽め）
- COULD
  - アニメーション、エフェクト、音
  - 防御/状態異常/アイテム
  - 複数的、連戦
  - クリティカル、回避など複雑な戦闘
  - セーブ機能
  - 画像素材の本格導入

### 5.2 機能詳細
#### 5.2.1 機能名
- 概要：
- 入力
- 制約
- 処理
- 出力
- 例外・バリデーション
- 受け入れ条件（完了条件）

敵の能力はゲーム開始時に決定し、戦闘中は固定値とするが、ゲームごとで多少の変動を発生させる。

### 5.3 データ要件
#### 5.3.1 データ構造
- プレイヤー情報（HP、MP、剣の攻撃力、魔法の消費MPと攻撃力）
- 敵情報（HP、攻撃力）
- ゲーム状態（現在の画面、ターン中かどうか）

#### 5.3.2 保存仕様
- メモリ上でのみ管理する（JavaScriptの変数）

#### 5.3.3 識別方法
- 単一プレイヤー・単一敵のため識別IDは不要

---

## 6. 非機能要件
- 性能：コマンド入力後、遅延を感じさせず戦闘処理が完了すること。
- 可用性：ブラウザ再読み込みで状態は保持しない。
- 保守性：1ファイル構成だが、処理は機能単位で分ける。

---

## 7. 制約・リスク

---

## 8. 受け入れ基準（完了条件）
以下を全て満たした場合、本（アプリ / システム）は「完成」とする。
- S01 → B01 → R01 → リスタートが一通り動く。
- プレイヤーの行動→敵の行動で1ターンとなっている。
- プレイヤーのコマンドを選択した際に、その通りに処理が行われ、画面に反映される。
- MP不足時は魔法が使えない。
- どちらかのHPが0になった時、R01に遷移する。
- リスタート後に、HP/MPがプレイヤー、敵ともに初期化される。

---

## 9. 今後の拡張（バックログ）
- Unityでの実装
- 複数的、連戦
- 本格的なRPGへ
- クリティカル、回避などの複雑な戦闘
- 防御/状態異常/アイテム
- アニメーション、音、エフェクト

---

## 10. 参考資料

