# 設計書：command-battle-js

## 目次
- [設計書：command-battle-js](#設計書command-battle-js)
  - [目次](#目次)
  - [0. 改訂履歴](#0-改訂履歴)
  - [1. この設計書の目的](#1-この設計書の目的)
  - [2. 前提・参照](#2-前提参照)
  - [3. 全体アーキテクチャ](#3-全体アーキテクチャ)
    - [3.1 構成図（任意）](#31-構成図任意)
  - [4. 画面設計（UI / 画面遷移）](#4-画面設計ui--画面遷移)
    - [4.1 画面一覧](#41-画面一覧)
    - [4.2 画面遷移](#42-画面遷移)
  - [5. 状態設計（State）](#5-状態設計state)
    - [5.1 状態の持ち方（最重要）](#51-状態の持ち方最重要)
    - [5.2 状態一覧](#52-状態一覧)
    - [5.3 状態遷移](#53-状態遷移)
  - [6. ドメイン設計（ルール・計算・制約）](#6-ドメイン設計ルール計算制約)
    - [6.1 ルール](#61-ルール)
    - [6.2 計算（数字の扱い）](#62-計算数字の扱い)
    - [6.3 制約（禁止事項）](#63-制約禁止事項)
  - [7. 処理フロー（ユースケース別）](#7-処理フローユースケース別)
    - [7.1 ユースケース一覧](#71-ユースケース一覧)
    - [7.2 UC詳細](#72-uc詳細)
      - [UC-01:](#uc-01)
  - [8. 関数・モジュール設計（責務分割）](#8-関数モジュール設計責務分割)
  - [9. エラーハンドリング / バリデーション](#9-エラーハンドリング--バリデーション)
  - [10. テスト方針（手動テスト含む）](#10-テスト方針手動テスト含む)
  - [12. 未決事項・TODO](#12-未決事項todo)


## 0. 改訂履歴
| 日付 | 版 | 変更概要 | 変更者 |
|---|---|---|---|
| 2026-02-12 | 0.1 | 初版 | 久瀬匠 |

---

## 1. この設計書の目的
- command-battle-jsの開発がスムーズに進行していくようにするため。
- 設計書の作成を経験する。

## 2. 前提・参照
- requirements.md（版：0.1）

## 3. 全体アーキテクチャ
### 3.1 構成図（任意）
- 

## 4. 画面設計（UI / 画面遷移）
### 4.1 画面一覧
| 画面ID | 画面名 | 主な責務 | 主な入力 | 主な出力 |
|---|---|---|---|---|

### 4.2 画面遷移
- 

## 5. 状態設計（State）
### 5.1 状態の持ち方（最重要）
- ゲーム全体の状態をJavaScriptの変数として管理する。
- 状態が変化したら、画面表示を更新する。
- ユーザー操作によって状態が変更される。

### 5.2 状態一覧
- game
  - currentScreen（S01 / B01 / R01）
  - currentTurn
  - isProcessing（行動処理中かどうか）
- player
  - hp
  - mp
- enemy
  - hp
  - attackDamage


### 5.3 状態遷移
| イベント | 前提 | 変更される状態 | 表示更新 |
|---|---|---|---|

## 6. ドメイン設計（ルール・計算・制約）
### 6.1 ルール
- プレイヤーの行動 → 敵行動で1ターン
- プレイヤーの攻撃手法は剣と魔法の2種類
- 敵は攻撃しかない
- それぞれの行動終了後に都度勝敗判定を行う。ターン終了後ではない。

### 6.2 計算（数字の扱い）
- player (const)
  - playerHp = 10
  - playerMp = 10
  - swordDamage = 2
  - fireballDamage = 3
  - fireballMp = 3
- enemy (const)
- enemy (random) ← 固定値が実装できた後に行う予定
### 6.3 制約（禁止事項）
- 

## 7. 処理フロー（ユースケース別）
### 7.1 ユースケース一覧
- UC-01:

### 7.2 UC詳細
#### UC-01:
- トリガー：
- 前提条件：
- 入力：
- 処理手順：
  1. 
- 出力：
- 例外：

## 8. 関数・モジュール設計（責務分割）
- 

## 9. エラーハンドリング / バリデーション
- 

## 10. テスト方針（手動テスト含む）
| ID | 操作 | 期待結果 |
|---|---|---|

## 12. 未決事項・TODO
- 